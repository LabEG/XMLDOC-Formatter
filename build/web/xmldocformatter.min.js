var LabEG=this.LabEG||{};if(LabEG.Lib=LabEG.Lib||{},LabEG.Lib.XMLDOCFormatter)throw new Error("Redefine: LabEG.Lib.XMLFormatter");!function(){"use strict";LabEG.Lib.XMLDOCFormatter=function(){var t=this;this.options={charsBetweenTags:"\r\n",charsForTabs:"    ",notPairedTags:"meta|link|img|br|input".split("|"),isMultilineAttributes:!1},this.onLog=function(){},this.onWarning=function(t){console.warn("XMLFormatter warning: ",t)},this.onError=function(t){console.error("XMLFormatter error: ",t)};var e="",n="",o=!1,r=0,s=[],a=0,i="",c=[],g=0,l={Comment:/^<!--.*?-->/,Tag:/^<[\s\S]*?>/,Text:/^[^<]+/,Empty:/^(\r|\n|\r\n|\s|\t)+/};this.format=function(h){for(n="",o=!1,a=0,h=e+h;!o;)if(s=h.match(l.Empty))h=h.substring(s[0].length,h.length),t.onLog(i+"Empty text node or new line.");else if(s=h.match(l.Comment)){for(h=h.substring(s[0].length,h.length),i="",g=0;r>g;g+=1)i+=t.options.charsForTabs;t.onLog(i+"HTML comment: "+s[0]),n+=i+s[0]+t.options.charsBetweenTags}else if(s=h.match(l.Tag)){for(h=h.substring(s[0].length,h.length),s[0]=s[0].replace(/\r|\n|\r\n/g,"").replace(/\s{2,}/g," ").replace(/^<\s/g,"<").replace(/\s>$/g,">"),s[0].match(/^<\//)&&(r-=1),i="",g=0;r>g;g+=1)i+=t.options.charsForTabs;s[0].match(/^<[!\/]/)||s[0].match(/\/>$/)||(r+=1,c[r]=s[0].match(/^<(.*?)[\s>]/)[1],console.log(s[0]),t.options.notPairedTags.indexOf(c[r])>-1&&(r-=1)),t.onLog(i+"Tag: "+s[0]),n+=i+s[0]+t.options.charsBetweenTags}else if(s=h.match(l.Text)){for(h=h.substring(s[0].length,h.length),s[0]=s[0].replace(/\r|\n|\r\n/g,"").replace(/\s{2,}/g," "),i="",g=0;r>g;g+=1)i+=t.options.charsForTabs;t.onLog(i+"Simple text: "+s[0]),n+=i+s[0]+t.options.charsBetweenTags}else 0!==h.length?h.length>0?(e=h,o=!0,t.onLog("Parsing All block ended, ending is cached to next cycle.")):(a+=1,a>3&&(o=!0,this.onWarning("Cycles limit."))):(o=!0,e="",t.onLog("Parsing All block complete."));return n},this.clear=function(){e="",r=0,c.length=0}};try{module.exports=LabEG.Lib.XMLDOCFormatter}catch(t){}}();