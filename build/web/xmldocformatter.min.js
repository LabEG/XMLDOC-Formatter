var LabEG=this.LabEG||{};if(LabEG.Lib=LabEG.Lib||{},LabEG.Lib.XMLDOCFormatter)throw new Error("Redefine: LabEG.Lib.XMLFormatter");!function(){"use strict";LabEG.Lib.XMLDOCFormatter=function(){var t=this;this.options={charsBetweenTags:"\r\n",charsForTabs:"    "},this.onLog=function(t){console.log("XMLFormatter log: ",t)},this.onWarning=function(t){console.warn("XMLFormatter warning: ",t)},this.onError=function(t){console.error("XMLFormatter error: ",t)};var o="",e="",n=!1,r=0,s=[],a=0,i="",g=0,h={XMLTagOpen:/^<[^!\/].*?>/,XMLTagClose:/^<\/.*?>/,XMLComment:/^<!--.*?-->/,HTMLSpecTag:/^<![^<>]*?>/,HTMLNotPairedTags:/^<(meta|link|img|br)[^<>]*?>/,XMLTagWithoutPaier:/^<[^<>]*?\/>/,SimpleText:/^[^<>]+/,EmptyTextNode:/^(\r|\n|\r\n|\s)+/};this.format=function(c){for(e="",n=!1,a=0,c=o+c;!n;)if(s=c.match(h.EmptyTextNode)){for(c=c.substring(s[0].length,c.length),i="",g=0;r>g;g+=1)i+=t.options.charsForTabs;t.onLog(i+"Empty text node or new line.")}else if(s=c.match(h.XMLTagWithoutPaier)){for(c=c.substring(s[0].length,c.length),i="",g=0;r>g;g+=1)i+=t.options.charsForTabs;t.onLog(i+"Tag without pair: "+s[0]),e+=i+s[0]+t.options.charsBetweenTags}else if(s=c.match(h.HTMLNotPairedTags)){for(c=c.substring(s[0].length,c.length),i="",g=0;r>g;g+=1)i+=t.options.charsForTabs;t.onLog(i+"Not paired html tag: "+s[0]),e+=i+s[0]+t.options.charsBetweenTags}else if(s=c.match(h.XMLTagOpen)){for(c=c.substring(s[0].length,c.length),i="",g=0;r>g;g+=1)i+=t.options.charsForTabs;r+=1,t.onLog(i+"Tag open: "+s[0]),e+=i+s[0]+t.options.charsBetweenTags}else if(s=c.match(h.XMLTagClose)){for(c=c.substring(s[0].length,c.length),r-=1,i="",g=0;r>g;g+=1)i+=t.options.charsForTabs;t.onLog(i+"Tag close: "+s[0]),e+=i+s[0]+t.options.charsBetweenTags}else if(s=c.match(h.SimpleText)){for(c=c.substring(s[0].length,c.length),s[0]=s[0].replace(/\r|\n|\r\n|\s{2,}/g),i="",g=0;r>g;g+=1)i+=t.options.charsForTabs;t.onLog(i+"Simple text: "+s[0]),e+=i+s[0]+t.options.charsBetweenTags}else if(s=c.match(h.XMLComment)){for(c=c.substring(s[0].length,c.length),i="",g=0;r>g;g+=1)i+=t.options.charsForTabs;t.onLog(i+"HTML comment: "+s[0]),e+=i+s[0]+t.options.charsBetweenTags}else if(s=c.match(h.HTMLSpecTag)){for(c=c.substring(s[0].length,c.length),i="",g=0;r>g;g+=1)i+=t.options.charsForTabs;t.onLog(i+"HTML spec tag: "+s[0]),e+=i+s[0]+t.options.charsBetweenTags}else 0!==c.length?c.length>0?(o=c,n=!0,t.onError("Parsing All block ended, ending is cached to next cycle.")):(a+=1,a>3&&(n=!0,this.onWarning("Cycles limit."))):(n=!0,o="",t.onLog("Parsing All block complete."));return e},this.clear=function(){o="",r=0}};try{module.exports=LabEG.Lib.XMLDOCFormatter}catch(t){}}();